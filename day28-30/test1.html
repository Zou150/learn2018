<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            box-sizing: border-box;
        }
        #email-input {
            height: 30px;
        }
        ul{
            padding: 0em;
        }
        li{
            padding-left:0px;
            margin-left:0px; 
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <input id="email-input" type="text">
        <ul id="email-sug-wrapper" class="email-sug"></ul>
    </div>

    <script>
        var postfixList = ['163.com', 'gmail.com', '126.com', 'qq.com', '263.net'];

        
        var inputDom = document.getElementById('email-input');
        var output = document.getElementById('email-sug-wrapper');


        inputDom.keyup = function() {
            //获取用户输入，生成提示框中的提示内容，将提示内容添加到email-sug-wrapper中
            var text = inputDom.value;
            console.log(text);
            console.log('event handle');

            //控制email-sug-wrapper的显示/隐藏状态
            
        }
        
        function getTrim(obj) {//获取用户输入
            //拿到input输入框的输入内容trim后返回
            var inputDom = obj.value;
            return inputDom.trim();    
        }

        //生成提示框中的提示内容
        function context(obj) {
            //获取用户输入
            var temp='';
            contentList=[];
            if(obj.length ==0) {
                rerturn;
            }
            //遍历postfixList 
            for(var i = 0;i<postfixList.length;i++) {
                //把用户输入和每一个postfix进行结合成为每一个Li
                if(obj.index('@')== -1) {
                    temp = obj + '@' +postfixList[i];
                    contentList.push(temp);
                    addList(temp);
                }
                else {
                    lastPostfixList = obj.slice(obj.index('@')+1);
                    excon = obj.slice(0,obj.index('@')+1);
                    if(postfixList[i].indexOf(lastPostfixList)!==1) {
                        temp = excon + postdixList[i];
                        contentList.push(temp);
                        addList(temp);
                    }
                    else {
                        temp = obj + postfixList[i];
                    }
                }
            }
            return contentList;//返回生成的提示内容
        }

        //将提示内容添加到email-sug-wrapper中
        function addList(obj) {
            //获取生成提示框中的提示内容
            var li='';
            for(option of obj) {
                li += '<li>${option}</li>';
            }
            //将内容添加到email-sug-wrapper中
            document.getElementById('email-sug-wrapper').innerHTML = li;
        }


        //控制email-sug-wrapper的显示/隐藏状态
        function shoePrompt(value) {

            if (value) {
                output.style.display = none;//用户输入为空,隐藏提示框
            } else {
                output.style.display = block;//显示提示框
            }
        }
        
        function 隐藏提示框() {
            //做具体隐藏提示框的操作
        }
        
        function 显示提示框() {
            //做具体显示提示框的操作
        }
    </script>
</body>
</html>